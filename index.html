<!DOCTYPE html>
<html lang="ru">
	<head>
		<title>Валидация на Java Script</title>
		<meta charset="UTF-8">
		<meta name="format-detection" content="telephone=no">
		<link rel="stylesheet" href="form.css">
		<link rel="stylesheet" href="style.css">
		<link rel="shortcut icon" href="img/favicon.ico">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">

		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.3.1/styles/default.min.css">
		<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.3.1/highlight.min.js"></script>
		<script>hljs.highlightAll();</script>
	</head>
<body> 

	<div class="wrapper">
		<main class="page">

			<section class="page__main main">
				<div class="main__container">

					<div class="main__title">Валидация на Java Script</div>

					<div class="main__inner">

						<div class="main__demo">Демо</div>

						<form action="#" class="main__form form">
							<div class="form__line">

								<div class="form__field field">
									<input id="input" class="field__input" name="form[]" autocomplete="off" type="name" placeholder=" " 
										data-error="Заполните поле" data-required="name" data-validate>
									<label for="input" class="field__label">Имя <span>*</span></label>
								</div>

								<div class="form__field field">
									<input id="input" class="field__input" name="form[]" autocomplete="off" type="name" placeholder=" " 
									data-error="Заполните поле" data-required="name" data-validate>
									<label for="input" class="field__label">Фамилия <span>*</span></label>
								</div>

								<div class="form__field field">
									<input id="input" class="field__input" name="tel" autocomplete="off" type="number" placeholder=" " 
									data-error="Заполните поле" data-required="tel" data-validate>
									<label for="input" class="field__label">Телефон <span>*</span></label>
								</div>

								<div class="form__field field">
									<input id="input" class="field__input" name="email" autocomplete="off" type="text" placeholder=" " 
									data-error="Неверный Email" data-required="email" data-validate>
									<label for="input" class="field__label">Email <span>*</span></label>
								</div>

								<label for="check-sd" class="form__field checkbox">
									<input id="check-sd" data-error="Ошибка" class="checkbox__input" type="checkbox" value="1" name="form[]" data-required="checkbox">
									<span class="checkbox__text"><span>Соглашаюсь на обработку
											<a href="">персональных данных</a></span></span>
								</label>

								<button type="submit" class="form__btn btn">Зарегистрироваться</button>

							</div>
						</form>

					</div>

					<div class="main__descp descp-main">
						<div class="descp-main__title">Работа с полями форм</div>
						<div class="descp-main__text">Работа с полями форм подразумевает под собой следующий функционал:</div>
						<ol class="descp-main__list">
							<li class="descp-main__list-item">Активный placeholder при фокусе</li>
							<li class="descp-main__list-item">Добавление классов полю и его родителю при фокусе</li>
							<li class="descp-main__list-item">Возможность моментальной валидации поля при потере фокуса</li>
							<li class="descp-main__list-item">Ограничение по колличеству символов</li>
							<li class="descp-main__list-item">Валидация по регулярному выражению для полей с типом name</li>
							<li class="descp-main__list-item">Валидация по регулярному выражению для полей с типом телефон</li>
							<li class="descp-main__list-item">Валидация по регулярному выражению для полей с типом email</li>
						</ol>
					</div>

					<div class="main__descp descp-main">
						<div class="descp-main__title">Валидация элементов форм</div>
						<div class="descp-main__text">
							Для того чтобы скрипт начал вызывать функционал валидации поля в
							момент потери им фокуса, следует добавить полю атрибут <span>data-validate</span>.
							Стоит добавить, что функционал работы с полями форм также удалит
							ошибку добавленную к полю валидатором при получении им фокуса
						</div>
						<div class="descp-main__text">
							Для того чтобы элемент формы начал проходить валидацию, ему
							следует добавить атрибут <span>data-required</span>. Теперь при отправке формы
							(если включена валидация), а также если элементу добавлен атрибут
							<span>data-validate</span>, он будет проверяться на предмет заполениния.
						</div>
						<div class="descp-main__text">
							Для того чтобы включить особые правила валидации поля, атрибуту <span>data-required</span>
							следует добавить одно из значений:
						</div>
						<ul class="descp-main__list">
							<li class="descp-main__list-item"><span>name</span> — включит валидацию на ввод корретного ввода имени.
								Поле ограничено по колличеству символов, не менее <span>3х и не более 50</span>. В поле невозможен ввод цифровых значений.
							</li>
							<li class="descp-main__list-item"><span>tel</span> — включит валидацию на ввод цифровых значений, <span>не менее 10 символов</span>.</li>
							<li class="descp-main__list-item"><span>email</span> — включит валидацию на ввод корретного <span>E-mail с символом @</span>.</li>
						</ul>
						<div class="descp-main__title-m title-center">Пример</div>

					</div>

					<div class="descp-main__size-m">
						<div class="descp-main__img">
							<img src="img/01.png" loading="lazy" alt="Картинка">
						</div>
					</div>

					<div class="main__descp descp-main">

						<div class="descp-main__text">
							Если элемент заполнен не верно, к нему, а также к его родителю добавится класс <span>_form-error</span>. 
							Так же выведется текст ошибки: 
						</div>
						<ul class="descp-main__list">
							<li class="descp-main__list-item">Для полей с атрибутом <span>data-required="name"</span> - "Минимальная длинна <span>3</span> символа"</li>
							<li class="descp-main__list-item">Для полей с атрибутом <span>data-required="tel"</span> - "Минимальная длинна <span>10</span> символов"</li>
							<li class="descp-main__list-item">Для полей с атрибутом <span>data-required="email"</span> - "Неверный Email"</li>
							<li class="descp-main__list-item">Для полей с атрибутом <span>data-required="checkbox"</span> - Предполагается скрывать вывод ошибки и стилизовать обводку чек-бокса</li>
							<li class="descp-main__list-item">Для полей с атрибутом <span>data-required="text"</span> - "Заполните поле"</li>
							<li class="descp-main__list-item">Для полей с атрибутом <span>data-required</span> - "Заполните поле". При условии, что в поле добавлен атрибут <span>data-error="Заполните поле"</span></li>
							<li class="descp-main__list-item">Для полей с атрибутом <span>data-required="text"</span> - Установлено ограничение в <span>400px</span></li>
						</ul>
						<div class="descp-main__text">
							Тексты ошибок выведутся при условии, что в поля добавлен атрибут <span>data-error="Заполните поле"</span>
						</div>
						<div class="descp-main__text">
							Так же функционал работы с полями удалит классы ошибок и объект с классом <span>form__error</span> при получении полем фокуса.
						</div>
					</div>

				</div>

				<div class="main__code code-main">
					<div class="code-main__title">Код</div>

					<div class="code-main__item item-code">
						<div class="item-code__title">Inputs Html</div>
						<div class="item-code__descp">
							<pre class="item-code__code">
								<code class="html">
    &lt;form action=&quot;#&quot; class=&quot;main__form form&quot;&gt;
        &lt;div class=&quot;form__line&quot;&gt;
            &lt;div class=&quot;form__field field&quot;&gt;
                &lt;input id=&quot;input&quot; class=&quot;field__input&quot; name=&quot;form[]&quot; autocomplete=&quot;off&quot; type=&quot;text&quot; placeholder=&quot; &quot; 
                    data-error=&quot;Заполните поле&quot; data-required=&quot;name&quot; data-validate&gt;
                &lt;label for=&quot;input&quot; class=&quot;field__label&quot;&gt;Имя &lt;span&gt;*&lt;/span&gt;&lt;/label&gt;
            &lt;/div&gt;
            &lt;div class=&quot;form__field field&quot;&gt;
                &lt;input id=&quot;input&quot; class=&quot;field__input&quot; name=&quot;form[]&quot; autocomplete=&quot;off&quot; type=&quot;text&quot; placeholder=&quot; &quot; 
                    data-error=&quot;Заполните поле&quot; data-required=&quot;name&quot; data-validate&gt;
                &lt;label for=&quot;input&quot; class=&quot;field__label&quot;&gt;Фамилия &lt;span&gt;*&lt;/span&gt;&lt;/label&gt;
            &lt;/div&gt;
            &lt;div class=&quot;form__field field&quot;&gt;
                &lt;input id=&quot;input&quot; class=&quot;field__input&quot; name=&quot;tel&quot; autocomplete=&quot;off&quot; type=&quot;number&quot; placeholder=&quot; &quot; 
                    data-error=&quot;Заполните поле&quot; data-required=&quot;tel&quot; data-validate&gt;
                &lt;label for=&quot;input&quot; class=&quot;field__label&quot;&gt;Телефон &lt;span&gt;*&lt;/span&gt;&lt;/label&gt;
            &lt;/div&gt;
            &lt;div class=&quot;form__field field&quot;&gt;
                &lt;input id=&quot;input&quot; class=&quot;field__input&quot; name=&quot;email&quot; autocomplete=&quot;off&quot; type=&quot;text&quot; placeholder=&quot; &quot;
                    data-error=&quot;Неверный Email&quot; data-required=&quot;email&quot; data-validate&gt;
                &lt;label for=&quot;input&quot; class=&quot;field__label&quot;&gt;Email &lt;span&gt;*&lt;/span&gt;&lt;/label&gt;
            &lt;/div&gt;
            &lt;label for=&quot;check-sd&quot; class=&quot;form__field checkbox&quot;&gt;
                &lt;input id=&quot;check-sd&quot; data-error=&quot;Ошибка&quot; class=&quot;checkbox__input&quot; type=&quot;checkbox&quot; value=&quot;1&quot;
                    name=&quot;form[]&quot; data-required=&quot;checkbox&quot;&gt;
                &lt;span class=&quot;checkbox__text&quot;&gt;&lt;span&gt;Соглашаюсь на обработку
                    &lt;a href=&quot;&quot;&gt;персональных данных&lt;/a&gt;&lt;/span&gt;&lt;/span&gt;
            &lt;/label&gt;
            &lt;button type=&quot;submit&quot; class=&quot;form__btn btn&quot;&gt;Зарегистрироваться&lt;/button&gt;
        &lt;/div&gt;
    &lt;/form&gt;
								</code>
							</pre>
						</div>
					</div>

					<div class="code-main__item item-code">
						<div class="item-code__title">Inputs Css</div>
						<div class="item-code__descp">
							<pre class="item-code__code">
								<code class="css">
.field {
	position: relative;
	overflow: hidden;
	width: 100%;
}

.field__input {
	display: block;
	margin: 0;
	padding: 0px 2.4375rem 0 0.9375rem;
	color: inherit;
	width: 100%;
	font-family: inherit;
	font-size: 1rem;
	font-weight: inherit;
	border: none;
	color: #000;
	transition: all 0.3s ease 0s;
	height: 3.125rem;
	border-radius: 0.1875rem;
	background-color: rgba(2, 0, 32, 0.03);
}

@media (any-hover: hover) {
	.field__input:hover { 
		background-color: #02002026;
	} 
}

.field__label {
	font-size: 0.75rem;
	text-transform: uppercase;
	color: #65657b;
	left: 1.25rem;
	line-height: 0.875rem;
	pointer-events: none;
	position: absolute;
	transform-origin: 0 50%;
	transition: transform 200ms, color 200ms;
	top: 1.25rem;
}

.field__input:focus ~ .field__label,
.field__input:not(:placeholder-shown) ~ .field__label {
	transform: translateY(-0.9375rem) translateX(-0.3125rem) scale(0.65);
}

.field._form-error .field__input {
	border: 0.0625rem solid red;
}

.field .form__error {
	display: block;
	font-size: 0.625rem;
	font-weight: 400;
	letter-spacing: 0em;
	color: red;
	margin-top: 0.3125rem;
}

.field:before {
	content: '';
	position: absolute;
	top: 50%;
	right: 0.8125rem;
	transform: translateY(-50%);
	width: 1.25rem;
	height: 1.25rem;
}

.field._check-focus:before {
	background-image: url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjUiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNSAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0yMS4zMzQgNi40NzAxNkwxMC4yMDY4IDE4TDMuMzMzOTggMTAuODc4NEw0LjkyNDYzIDkuNDA4MjRMMTAuMjA2OCAxNC44ODE2TDE5Ljc0MzMgNUwyMS4zMzQgNi40NzAxNloiIGZpbGw9IiMwMEJGMzYiLz4KPC9zdmc+Cg==');
}

.field._form-error:before {
	top: 40%;
	width: 1.125rem;
	height: 1.125rem;
}

.field._form-error:before {
		background-image: url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjUiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNSAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTIwLjMzMDUgMi41ODU5NEwxMi4zMzA1IDEwLjU4NTlMNC4zMzA1MiAyLjU4NTk0TDIuOTE2MDIgMy45OTk5NEwxMC45MTY1IDExLjk5OTlMMi45MTYwMiAxOS45OTk5TDQuMzMwNTIgMjEuNDEzOUwxMi4zMzA1IDEzLjQxMzlMMjAuMzMwNSAyMS40MTM5TDIxLjc0NDUgMTkuOTk5OUwxMy43NDQ1IDExLjk5OTlMMjEuNzQ0NSAzLjk5OTk0TDIwLjMzMDUgMi41ODU5NFoiIGZpbGw9InJlZCIvPg==');
}
.checkbox {
	position: relative;
	display: block;
}

.checkbox__input {
	position: absolute;
	width: 0;
	height: 0;
	opacity: 0;
	visibility: hidden;
}

.checkbox__text {
	display: -webkit-box;
	display: -ms-flexbox;
	display: flex;
	align-items: center;
	position: relative;
	font-size: 0.6875rem;
	font-weight: 400;
	line-height: 1.2857142857;
	letter-spacing: 0;
	text-transform: uppercase;
	color: #020020;
	cursor: pointer;
}

.checkbox__text:before {
	content: "";
	align-self: flex-start;
	margin: 0;
	flex: 0 0 1.25rem;
	left: 0;
	top: 0;
	width: 1.25rem;
	height: 1.25rem;
	background: 0 0;
	border: .0625rem solid rgba(2, 0, 32, .3);
	border-radius: .1875rem;
}

.checkbox__input:checked + .checkbox__text:before {
	content: "\e90c";
	font-size: .5rem;
	display: -webkit-box;
	display: -ms-flexbox;
	display: flex;
	justify-content: center;
	align-items: center;
	background: #120b8d;
	color: #fff;
	font-family: icons;
	font-style: normal;
	font-weight: 400;
	font-variant: normal;
	text-transform: none;
	line-height: 1;
}

.checkbox__text span {
	margin-left: .625rem;
}

.checkbox__text a {
	font-size: 0.6875rem;
	font-weight: 400;
	line-height: 1.2857142857;
	letter-spacing: 0;
	color: #120b8d;
	text-decoration: none;
	transition: all .4s ease 0s;
}

.checkbox._form-error .checkbox__text:before {
	border: 0.0625rem solid red;
}

.checkbox .form__error {
	display: none;
}

.btn {
	display: inline-flex;
	justify-content: center;
	align-items: center;
	text-align: center;
	padding: .90625rem 1.48125rem;
	font-size: 1rem;
	font-weight: 600;
	color: #fff;
	background: #120b8d;
	border-radius: .1875rem;
	transition: all .4s ease 0s;
}

@media (any-hover: hover){
		.btn:hover { 
		opacity: 0.7;
	} 
}
</code>
							</pre>
						</div>
					</div>

					<div class="code-main__item item-code">
						<div class="item-code__title">Validation JavaScript</div>
						<div class="item-code__descp">
							<pre class="item-code__code">
								<code class="javascript">
document.addEventListener('DOMContentLoaded', () => {
	formFieldsInit();
	formSubmit(true);
});

function formFieldsInit() {
	document.body.addEventListener("focusin", handleFocusIn);
	document.body.addEventListener("focusout", handleFocusOut);
}

function handleFocusIn(e) {
	const targetElement = e.target;
	if (['INPUT', 'TEXTAREA'].includes(targetElement.tagName)) {
			if (targetElement.dataset.placeholder) {
					targetElement.placeholder = '';
			}
			toggleFocusClass(targetElement, true);
			formValidate.removeError(targetElement);
	}
}

function handleFocusOut(e) {
	const targetElement = e.target;
	if (['INPUT', 'TEXTAREA'].includes(targetElement.tagName)) {
			if (targetElement.dataset.placeholder) {
					targetElement.placeholder = targetElement.dataset.placeholder;
			}
			toggleFocusClass(targetElement, false);
			targetElement.parentElement.classList.add('_check-focus');

			if (targetElement.hasAttribute('data-validate')) {
					formValidate.validateInput(targetElement);
			}
	}
}

function toggleFocusClass(element, isFocused) {
	element.classList.toggle('_form-focus', isFocused);
	element.parentElement.classList.toggle('_form-focus', isFocused);
}

const formValidate = {
	getErrors(form) {
			return Array.from(form.querySelectorAll('*[data-required]'))
					.filter(item => (item.offsetParent !== null || item.tagName === "SELECT") && !item.disabled)
					.reduce((errorCount, item) => errorCount + this.validateInput(item), 0);
	},
	validateInput(item) {
			let error = 0;
			const value = item.value.trim();
			const type = item.dataset.required;

			if (type === "email") {
					item.value = value.replace(" ", "");
					error += this.emailTest(item) ? this.addError(item) : this.removeError(item);
			} else if (type === "name") {
					item.value = value.replace(/[^А-Яа-яёA-Za-z-]/g, '');
					error += value.length < 3 ? this.addError(item, "Минимальная длинна 4 символа") : this.removeError(item);
			} else if (type === "tel") {
					error += value.length < 10 ? this.addError(item, "Минимальная длинна 10 символов") : this.removeError(item);
			} else if (item.type === "checkbox" && !item.checked) {
					error += this.addError(item);
			} else {
					error += !value ? this.addError(item) : this.removeError(item);
			}
			return error;
	},
	addError(item, message = item.dataset.error) {
			item.classList.add('_form-error');
			item.parentElement.classList.add('_form-error');
			item.parentElement.classList.remove('_check-focus');
			const errorElement = item.parentElement.querySelector('.form__error');
			if (errorElement) errorElement.remove();
			if (message) {
					item.parentElement.insertAdjacentHTML('beforeend', `<span class="form__error">${message}</span>`);
			}
			return 1;
	},
	removeError(item) {
			item.classList.remove('_form-error');
			item.parentElement.classList.remove('_form-error');
			const errorElement = item.parentElement.querySelector('.form__error');
			if (errorElement) errorElement.remove();
			return 0;
	},
	formClean(form) {
			form.reset();
			setTimeout(() => {
					form.querySelectorAll('input,textarea').forEach(el => {
							el.parentElement.classList.remove('_form-focus');
							el.classList.remove('_form-focus');
							this.removeError(el);
							el.value = el.dataset.placeholder || '';
					});
					form.querySelectorAll('.checkbox__input').forEach(checkbox => {
							checkbox.checked = false;
					});
			}, 0);
	},
	emailTest(item) {
			return !/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,8})+$/.test(item.value);
	}
};

document.addEventListener('input', (e) => {
	const input = e.target;
	if (input.dataset.required === "name") {
			input.value = input.value.replace(/[^А-Яа-яёA-Za-z-]/g, '');
	}
	if (input.value.length > 350) {
			input.value = input.value.slice(0, 350);
	}
});

function formSubmit(validate) {
	Array.from(document.forms).forEach(form => {
			form.addEventListener('submit', (e) => formSubmitAction(form, e, validate));
			form.addEventListener('reset', () => formValidate.formClean(form));
	});
}

async function formSubmitAction(form, e, validate) {
	const error = validate ? formValidate.getErrors(form) : 0;
	if (error !== 0) {
			e.preventDefault();
			const formError = form.querySelector('._form-error');
			if (formError && form.hasAttribute('data-goto-error')) {
					// Implement gotoBlock logic here
			}
	}
}
</code>
							</pre>
						</div>
					</div>

				</div>

					<!-- <pre>
						<code class="javascript">
						function helloWorld() {
								console.log('Hello, world!');
						}
						</code>
					</pre> -->
					
				</div>
			</section>

		</main>
	</div>
	<script src="script.js"></script>
</body> 
</html>